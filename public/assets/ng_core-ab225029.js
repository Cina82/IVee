!function e(t,n,i){function o(a,s){if(!n[a]){if(!t[a]){var c="function"==typeof require&&require;if(!s&&c)return c(a,!0);if(r)return r(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var u=n[a]={exports:{}};t[a][0].call(u.exports,function(e){var n=t[a][1][e];return o(n?n:e)},u,u.exports,e,t,n,i)}return n[a].exports}for(var r="function"==typeof require&&require,a=0;a<i.length;a++)o(i[a]);return o}({1:[function(e,t,n){e("../legacy-js/ng/modules/Curtain"),e("../legacy-js/ng/modules/TT"),e("../legacy-js/ng/modules/util"),e("../legacy-js/ng/modules/hotkeys")},{"../legacy-js/ng/modules/Curtain":2,"../legacy-js/ng/modules/TT":3,"../legacy-js/ng/modules/hotkeys":4,"../legacy-js/ng/modules/util":5}],2:[function(e,t,n){!function(){"use strict";angular.module("curtain",["tt","cfp.hotkeys"]).directive("curtain",["$compile","$rootElement","hotkeys",function(e,t,n){var i={mobile:function(t,n,i){var o,r=$("<div/>",{"class":"curtain-mobile-outer"});return r.attr("data-curtain","active"),r.hide(),r.appendTo("body"),n.appendTo(r),n.addClass("curtain-mobile curtain-opaque"),n.show(),r.prepend(e(angular.element('<div class="curtain-mobile-back" ng-show="'+t.isCloseable()+'"><a href="'+t.curtainCloseUrl+'" data-curtain-close data-curtain-builtin-close-button>Close window</a></div>'))(t)),{show:function(){o=$("body").children(":visible").hide(),r.show(),$("body").addClass("curtain-mobile-container").scrollTop(0)},hide:function(){r.hide(),$("body").removeClass("curtain-mobile-container"),o.show()}}},desktop:function(i,o,r){var a=t.find("body").length?t.find("body"):t,s=$("<div/>",{"class":"curtain"}),c="."+i.getCurtainClass()+"-header";return i.curtainCloseOnClick&&s.on("click",function(e){e.target==s[0]&&i.$apply(function(){angular.isUndefined(i.curtainVisible)||(i.curtainVisible=!1)})}),s.attr("data-curtain","active"),s.hide(),s.appendTo(a),o.appendTo(s),o.addClass("curtain-inner"),o.show(),o.find(c).append(e(angular.element('<a href="'+i.curtainCloseUrl+'" class="modal-close" data-curtain-close data-curtain-builtin-close-button ng-show="'+i.isCloseable()+'">&times;</a>'))(i)),{show:function(){s.show(),$("html").addClass("noscroll"),n.bindTo(i).add({combo:"esc",description:"Close the modal",callback:i.closeCurtain})},hide:function(){s.hide(),$("html").removeClass("noscroll")}}}};return{restrict:"A",scope:{curtainClass:"=",curtainVisible:"=",curtainCloseable:"=",curtainCloseOnClick:"@",curtainCloseUrl:"@"},template:'<div style="display: none;" ng-transclude></div>',transclude:!0,replace:!0,link:function(e,t,n){e.getCurtainClass=function(){return angular.isUndefined(e.curtainClass)?"pod":e.curtainClass},e.isCloseable=function(){return angular.isUndefined(e.curtainCloseable)||e.curtainCloseable},e.closeCurtain=function(){e.curtainVisible=!1};var o="undefined"!=typeof TT_MOBILE&&TT_MOBILE,r=i[o?"mobile":"desktop"],a=r(e,t,n);e.$watch("curtainVisible",function(e,t){e?a.show():e!==t&&a.hide()},!0),t.parent().find("[data-curtain-close]").on("click",function(t){e.curtainCloseUrl||t.preventDefault(),e.$apply(function(){angular.isUndefined(e.curtainVisible)||(e.curtainVisible=!1)})}),t.addClass(e.getCurtainClass()),t.addClass(e.getCurtainClass()+"-modal")}}}])}()},{}],3:[function(e,t,n){!function(){"use strict";var e=angular.module("tt",[]).config(["$interpolateProvider",function(e){e.startSymbol("{[{"),e.endSymbol("}]}")}]).service("browserSupport",function(){return TT.support}).service("environment",["$q",function(e){var t=e.defer();return TT.page(function(e){t.resolve(e("tt/environment"))}),t.promise}]).factory("action",["$http","$q",function(e,t){function n(t,n){return n=$.extend({url:t,method:"POST",json:!1,headers:$.extend({Accept:"application/json"},n.headers||{})},n||{}),n.method=n.method.toUpperCase(),!n.json&&n.data&&"object"==typeof n.data&&(n=i(n)),delete n.json,e(n)}function i(e){return $.extend(e,{data:$.param(e.data),headers:$.extend({"Content-Type":"application/x-www-form-urlencoded; charset=utf-8"},e.headers||{})})}function o(e,i){function o(e){a.reject(e&&e.error||r)}var a=t.defer();return n(e,i).success(function(e){"object"!=typeof e||e.success!==!1?a.resolve(e):o(e)}).error(o),a.promise}var r="Unexpected error.";return o.track=function(e,t){return o("/event/add/",{json:!0,data:$.extend({type:e},t)})},o}]);e.directive("trackClickAction",["action","$parse",function(e,t){function n(t,n){e.track(t,n).then(function(){},function(e){throw new i(t,n,e)})}function i(e,t,n){this.message="Unable to track '"+e+"' event.",this.response=n,this.eventData=t,this.toString=function(){return this.message+" | event data: "+this.eventData+" | response: "+this.response}}return{restrict:"A",link:function(e,i,o){var r=t(o.trackClickAction)(e);if(!angular.isObject(r))throw"trackClickAction directive requires an object of events";i.on("click",function(){for(var e in r)n(e,r[e])})}}}]),e.directive("ngBlur",["$parse",function(e){return function(t,n,i){var o=e(i.ngBlur);n.on("blur",function(e){t.$apply(function(){o(t,{$event:e})})})}}])}()},{}],4:[function(e,t,n){!function(){"use strict";angular.module("cfp.hotkeys",[]).provider("hotkeys",function(){this.includeCheatSheet=!1,this.templateTitle="Keyboard Shortcuts:",this.template='<div class="cfp-hotkeys-container fade" ng-class="{in: helpVisible}" style="display: none;"><div class="cfp-hotkeys"><h4 class="cfp-hotkeys-title">{{ title }}</h4><table><tbody><tr ng-repeat="hotkey in hotkeys | filter:{ description: \'!$$undefined$$\' }"><td class="cfp-hotkeys-keys"><span ng-repeat="key in hotkey.format() track by $index" class="cfp-hotkeys-key">{{ key }}</span></td><td class="cfp-hotkeys-text">{{ hotkey.description }}</td></tr></tbody></table><div class="cfp-hotkeys-close" ng-click="toggleCheatSheet()">Ã—</div></div></div>',this.cheatSheetHotkey="?",this.cheatSheetDescription="Show / hide this help menu",this.$get=["$rootElement","$rootScope","$compile","$window","$document",function(e,t,n,i,o){function r(e){var t={command:"âŒ˜",shift:"â‡§",left:"â†",right:"â†’",up:"â†‘",down:"â†“","return":"â†©",backspace:"âŒ«"};e=e.split("+");for(var n=0;n<e.length;n++)"mod"===e[n]&&(i.navigator&&i.navigator.platform.indexOf("Mac")>=0?e[n]="command":e[n]="ctrl"),e[n]=t[e[n]]||e[n];return e.join(" + ")}function a(e,t,n,i,o,r){this.combo=e instanceof Array?e:[e],this.description=t,this.callback=n,this.action=i,this.allowIn=o,this.persistent=r}function s(){for(var e=p.hotkeys.length;e--;){var t=p.hotkeys[e];t&&!t.persistent&&u(t)}}function c(){p.helpVisible=!p.helpVisible,p.helpVisible?(k=f("esc"),u("esc"),l("esc",k.description,c)):(u("esc"),k!==!1&&l(k))}function l(e,t,n,i,o,r){var s,c=["INPUT","SELECT","TEXTAREA"],l=Object.prototype.toString.call(e);if("[object Object]"===l&&(t=e.description,n=e.callback,i=e.action,r=e.persistent,o=e.allowIn,e=e.combo),t instanceof Function?(i=n,n=t,t="$$undefined$$"):angular.isUndefined(t)&&(t="$$undefined$$"),void 0===r&&(r=!0),"function"==typeof n){s=n,o instanceof Array||(o=[]);for(var u,f=0;f<o.length;f++)o[f]=o[f].toUpperCase(),u=c.indexOf(o[f]),u!==-1&&c.splice(u,1);n=function(e){var t=!0,n=e.target||e.srcElement,i=n.nodeName.toUpperCase();if((" "+n.className+" ").indexOf(" mousetrap ")>-1)t=!0;else for(var o=0;o<c.length;o++)if(c[o]===i){t=!1;break}t&&h(s.apply(this,arguments))}}"string"==typeof i?Mousetrap.bind(e,h(n),i):Mousetrap.bind(e,h(n));var d=new a(e,t,n,i,o,r);return p.hotkeys.push(d),d}function u(e){var t=e instanceof a?e.combo:e;if(Mousetrap.off(t),angular.isArray(t)){for(var n=!0,i=t.length;i--;)n=u(t[i])&&n;return n}var o=p.hotkeys.indexOf(f(t));return o>-1&&(p.hotkeys[o].combo.length>1?p.hotkeys[o].combo.splice(p.hotkeys[o].combo.indexOf(t),1):p.hotkeys.splice(o,1),!0)}function f(e){for(var t,n=0;n<p.hotkeys.length;n++)if(t=p.hotkeys[n],t.combo.indexOf(e)>-1)return t;return!1}function d(e){return e.$id in y||(y[e.$id]=[],e.$on("$destroy",function(){for(var t=y[e.$id].length;t--;)u(y[e.$id][t]),delete y[e.$id][t]})),{add:function(t){var n;return n=arguments.length>1?l.apply(this,arguments):l(t),y[e.$id].push(n),this}}}function h(e){return function(n,i){if(e instanceof Array){var o=e[0],r=e[1];e=function(e){r.scope.$eval(o)}}t.$apply(function(){e(n,f(i))})}}Mousetrap.stopCallback=function(e,t){return!((" "+t.className+" ").indexOf(" mousetrap ")>-1)&&(t.contentEditable&&"true"==t.contentEditable)},a.prototype.format=function(){for(var e=this.combo[0],t=e.split(/[\s]/),n=0;n<t.length;n++)t[n]=r(t[n]);return t};var p=t.$new();p.hotkeys=[],p.helpVisible=!1,p.title=this.templateTitle,p.toggleCheatSheet=c;var y=[];if(t.$on("$routeChangeSuccess",function(e,t){s(),t&&t.hotkeys&&angular.forEach(t.hotkeys,function(e){var n=e[2];("string"==typeof n||n instanceof String)&&(e[2]=[n,t]),e[5]=!1,l.apply(this,e)})}),this.includeCheatSheet){var v=o[0],m=e[0],g=angular.element(this.template);l(this.cheatSheetHotkey,this.cheatSheetDescription,c),m!==v&&m!==v.documentElement||(m=v.body),angular.element(m).append(n(g)(p))}var k=!1,b={add:l,del:u,get:f,bindTo:d,template:this.template,toggleCheatSheet:c,includeCheatSheet:this.includeCheatSheet,cheatSheetHotkey:this.cheatSheetHotkey,cheatSheetDescription:this.cheatSheetDescription,purgeHotkeys:s,templateTitle:this.templateTitle};return b}]}).directive("hotkey",["hotkeys",function(e){return{restrict:"A",link:function(t,n,i){var o,r;angular.forEach(t.$eval(i.hotkey),function(t,n){r="string"==typeof i.hotkeyAllowIn?i.hotkeyAllowIn.split(/[\s,]+/):[],o=n,e.add({combo:n,description:i.hotkeyDescription,callback:t,action:i.hotkeyAction,allowIn:r})}),n.on("$destroy",function(){e.del(o)})}}}]).run(["hotkeys",function(e){}])}(),function(e,t,n){function i(e,t,n){return e.addEventListener?void e.addEventListener(t,n,!1):void e.attachEvent("on"+t,n)}function o(e){if("keypress"==e.type){var t=String.fromCharCode(e.which);return e.shiftKey||(t=t.toLowerCase()),t}return S[e.which]?S[e.which]:E[e.which]?E[e.which]:String.fromCharCode(e.which).toLowerCase()}function r(e,t){return e.sort().join(",")===t.sort().join(",")}function a(e){e=e||{};var t,n=!1;for(t in A)e[t]?n=!0:A[t]=0;n||(M=!1)}function s(e,t,n,i,o,a){var s,c,l=[],u=n.type;if(!j[e])return[];for("keyup"==u&&p(e)&&(t=[e]),s=0;s<j[e].length;++s)if(c=j[e][s],(i||!c.seq||A[c.seq]==c.level)&&u==c.action&&("keypress"==u&&!n.metaKey&&!n.ctrlKey||r(t,c.modifiers))){var f=!i&&c.combo==o,d=i&&c.seq==i&&c.level==a;(f||d)&&j[e].splice(s,1),l.push(c)}return l}function c(e){var t=[];return e.shiftKey&&t.push("shift"),e.altKey&&t.push("alt"),e.ctrlKey&&t.push("ctrl"),e.metaKey&&t.push("meta"),t}function l(e){return e.preventDefault?void e.preventDefault():void(e.returnValue=!1)}function u(e){return e.stopPropagation?void e.stopPropagation():void(e.cancelBubble=!0)}function f(e,t,n,i){I.stopCallback(t,t.target||t.srcElement,n,i)||e(t,n)===!1&&(l(t),u(t))}function d(e,t,n){var i,o=s(e,t,n),r={},c=0,l=!1;for(i=0;i<o.length;++i)o[i].seq&&(c=Math.max(c,o[i].level));for(i=0;i<o.length;++i)if(o[i].seq){if(o[i].level!=c)continue;l=!0,r[o[i].seq]=1,f(o[i].callback,n,o[i].combo,o[i].seq)}else l||f(o[i].callback,n,o[i].combo);var u="keypress"==n.type&&q;n.type!=M||p(e)||u||a(r),q=l&&"keydown"==n.type}function h(e){"number"!=typeof e.which&&(e.which=e.keyCode);var t=o(e);if(t)return"keyup"==e.type&&D===t?void(D=!1):void I.handleKey(t,c(e),e)}function p(e){return"shift"==e||"ctrl"==e||"alt"==e||"meta"==e}function y(){clearTimeout(T),T=setTimeout(a,1e3)}function v(){if(!w){w={};for(var e in S)e>95&&e<112||S.hasOwnProperty(e)&&(w[S[e]]=e)}return w}function m(e,t,n){return n||(n=v()[e]?"keydown":"keypress"),"keypress"==n&&t.length&&(n="keydown"),n}function g(e,t,n,i){function r(t){return function(){M=t,++A[e],y()}}function s(t){f(n,t,e),"keyup"!==i&&(D=o(t)),setTimeout(a,10)}A[e]=0;for(var c=0;c<t.length;++c){var l=c+1===t.length,u=l?s:r(i||b(t[c+1]).action);C(t[c],u,i,e,c)}}function k(e){return"+"===e?["+"]:e.split("+")}function b(e,t){var n,i,o,r=[];for(n=k(e),o=0;o<n.length;++o)i=n[o],U[i]&&(i=U[i]),t&&"keypress"!=t&&x[i]&&(i=x[i],r.push("shift")),p(i)&&r.push(i);return t=m(i,r,t),{key:i,modifiers:r,action:t}}function C(e,t,n,i,o){O[e+":"+n]=t,e=e.replace(/\s+/g," ");var r,a=e.split(" ");return a.length>1?void g(e,a,t,n):(r=b(e,n),j[r.key]=j[r.key]||[],s(r.key,r.modifiers,{type:r.action},i,e,o),void j[r.key][i?"unshift":"push"]({callback:t,modifiers:r.modifiers,action:r.action,seq:i,level:o,combo:e}))}function $(e,t,n){for(var i=0;i<e.length;++i)C(e[i],t,n)}for(var w,T,S={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},E={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},x={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},U={option:"alt",command:"meta","return":"enter",escape:"esc",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},j={},O={},A={},D=!1,q=!1,M=!1,V=1;V<20;++V)S[111+V]="f"+V;for(V=0;V<=9;++V)S[V+96]=V;i(t,"keypress",h),i(t,"keydown",h),i(t,"keyup",h);var I={bind:function(e,t,n){return e=e instanceof Array?e:[e],$(e,t,n),this},unbind:function(e,t){return I.bind(e,function(){},t)},trigger:function(e,t){return O[e+":"+t]&&O[e+":"+t]({},e),this},reset:function(){return j={},O={},this},stopCallback:function(e,t){return!((" "+t.className+" ").indexOf(" mousetrap ")>-1)&&("INPUT"==t.tagName||"SELECT"==t.tagName||"TEXTAREA"==t.tagName||t.isContentEditable)},handleKey:d};e.Mousetrap=I,"function"==typeof define&&define.amd&&define(I)}(window,document)},{}],5:[function(e,t,n){!function(){"use strict";function e(){function e(e){var t=String(e);return 1===t.length?"0"+t:t}Date.prototype.toISOString||(Date.prototype.toISOString=function(){return this.getUTCFullYear()+"-"+e(this.getUTCMonth()+1)+"-"+e(this.getUTCDate())+"T"+e(this.getUTCHours())+":"+e(this.getUTCMinutes())+":"+e(this.getUTCSeconds())+"."+String((this.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z"})}e();var t=angular.module("util",[]);t.directive("raw2html",function(){var e=function(e,t,n){var i=e.text||"",o=i.replace(/</g,"&lt;").replace(/</g,"&gt;"),r=o.replace(/(\r\n?|\n)/g,"<br />$1");t.html(r)};return{restrict:"A",scope:{text:"="},replace:!0,template:"<span></span>",link:e}}),t.directive("preventDefault",function(){return function(e,t,n){var i=n.preventDefault||"click";$(t).on(i,function(e){e.preventDefault()})}}),t.factory("isMobile",["$window",function(e){return e.TT_MOBILE}])}()},{}]},{},[1]);