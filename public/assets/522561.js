// HubSpot Messages Widget - Generated @ 1506156011299 - Copyright 2017 HubSpot, Inc.  http://www.hubspot.com
/** begin_closure **/ (function() {var messagesConfig = {"iFrameDomain":"https://app.hubspot.com","messagesEnv":"prod","portalId":522561};
/** Messages **/!function(e){function t(n){if(i[n])return i[n].exports;var s=i[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,t),s.l=!0,s.exports}var i={};return t.m=e,t.c=i,t.i=function(e){return e},t.d=function(e,t,i){Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var i=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(i,"a",i),i},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=14)}([function(e,t,i){"use strict";"use es6";function n(e){return e&&e.__esModule?e:{default:e}}function s(e){var t=null;if(document.cookie&&""!==document.cookie)for(var i=document.cookie.split(";"),n=0;n<i.length;n++){var s=i[n].trim();if(s.substring(0,e.length+1)===e+"="){t=s.substring(e.length+1);break}}return t}function a(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r.default.TWO_YEARS,n=new Date(Date.now()+i).toGMTString(),s=window.location.hostname.replace(/^www\./,""),a="."+s,o=[e+"="+t,"expires="+n,"domain="+a,"path=/"].join(";");document.cookie=o}Object.defineProperty(t,"__esModule",{value:!0}),t.getCookie=s,t.setCookie=a;var o=i(1),r=n(o);t.default={HUBSPOT:"hubspotutk",MESSAGES:"messagesUtk",IS_OPEN:"hs-messages-is-open",HIDE_WELCOME_MESSAGE:"hs-messages-hide-welcome-message",HUBSPOT_API_CSRF:"hubspotapi-csrf"}},function(e,t){"use strict";"use es6";Object.defineProperty(t,"__esModule",{value:!0});var i=12e4,n=18e5,s=864e5,a=365*s*2;t.default={TWO_MINUTES:i,THIRTY_MINUTES:n,ONE_DAY:s,TWO_YEARS:a},e.exports=t.default},function(e,t,i){"use strict";"use es6";function n(e){return e&&e.__esModule?e:{default:e}}function s(e,t){return e.test(t)}function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:navigator.userAgent,t=e,i=t.split("[FBAN");"undefined"!=typeof i[1]&&(t=i[0]),i=t.split("Twitter"),"undefined"!=typeof i[1]&&(t=i[0]);var n=new r.default.Class(t);return n.other.webkit=s(d,t),n.safari=n.apple.device&&n.other.webkit&&!n.other.opera&&!n.other.chrome,n}Object.defineProperty(t,"__esModule",{value:!0}),t.getWrappedIsMobile=a;var o=i(5),r=n(o),d=/WebKit/i;t.default=function(){return a()}()},function(e,t){"use strict";"use es6";Object.defineProperty(t,"__esModule",{value:!0}),t.default={IFRAME_RESIZE:"iframe-resize",OPEN_CHANGE:"open-change",CLOSED_WELCOME_MESSAGE:"closed-welcome-message",REQUEST_WIDGET:"request-widget",WIDGET_DATA:"widget-data"},e.exports=t.default},function(e,t,i){"use strict";"use es6";function n(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),o=i(6),r=i(2),d=n(r),u=i(3),l=n(u),h=i(0),c=n(h),p=i(1),f=n(p),m=i(7),g="hubspot-messages-iframe-container",b={ACTIVE:"hs-messages-widget-open",MOBILE:"hs-messages-mobile",SHADOW:"shadow"},v="X-HubSpot-Messages-Uri",w=function(){function e(t){var i=t.portalId,n=t.messagesEnv;s(this,e),this.portalId=parseInt(i,10),this.messagesEnv=n,this.isMobile=d.default.any,this.mobileSafari=d.default.safari,this.isOpen=!1,this.widgetData=null,this.handleMessage=this.handleMessage.bind(this)}return a(e,[{key:"getAPIDomain",value:function(){var e="qa"===this.messagesEnv?this.messagesEnv:"";return"https://api.hubspot"+e+".com"}},{key:"getMessagesUtk",value:function(){var e=(0,h.getCookie)(c.default.MESSAGES);if(!e){var t=(0,h.getCookie)(c.default.HUBSPOT)||!1;e=t||(0,o.getUuid)(),(0,h.setCookie)(c.default.MESSAGES,e)}return e}},{key:"getPortalIdFromPath",value:function(){var e=/^\/(?:[A-Za-z0-9-_]*)\/(\d+)(?:\/|$)/;return e.exec(window.location.pathname)[1]}},{key:"getInternalRequestUrl",value:function(){return this.getAPIDomain()+"/messages/v2/message/public/hubspot-app?portalId="+this.getPortalIdFromPath()}},{key:"getPublicRequestUrl",value:function(){var e=(0,h.getCookie)(c.default.HUBSPOT)||!1,t=this.getAPIDomain()+"/messages/v2/message/public?portalId="+this.portalId+"&messagesUtk="+this.getMessagesUtk();return e&&(t=t+"&hubspotUtk="+e),t}},{key:"setIFrameDomainOverride",value:function(e){this.iFrameDomainOverride=e}},{key:"getIFrameDomain",value:function(){var e="qa"===this.messagesEnv?"qa":"";return this.iFrameDomainOverride?this.iFrameDomainOverride:"https://app.hubspot"+e+".com"}},{key:"getRequestUrl",value:function(){return this.isInternal()?this.getInternalRequestUrl():this.getPublicRequestUrl()}},{key:"getIFrameSrc",value:function(){var e=(0,h.getCookie)(c.default.HUBSPOT)||!1,t=(0,h.getCookie)(c.default.IS_OPEN)||!1,i=(0,h.getCookie)(c.default.HIDE_WELCOME_MESSAGE)||!1,n="mobile="+this.isMobile+"&mobileSafari="+this.mobileSafari+"&open="+t+"&hideWelcomeMessage="+i+"&messagesUtk="+this.getMessagesUtk();return e&&(n=n+"&hubspotUtk="+e),this.getIFrameDomain()+"/live-messages/"+this.portalId+"/widget/?"+n}},{key:"loadIFrame",value:function(){if(!document.getElementById(g)){var e=document.createElement("div");e.id=g;var t=document.createElement("div");t.className=b.SHADOW,e.appendChild(t);var i=document.createElement("iframe");i.src=this.getIFrameSrc(),e.appendChild(i),document.body.appendChild(e)}}},{key:"isInternal",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location.hostname,i=/^(?:app|local)\.hubspot(?:qa)?\.com$/,e=i.test(t)&&53===this.portalId;return e}},{key:"sendStartupRequest",value:function(){var e=this,t=this.getRequestUrl(),i=new XMLHttpRequest;i.addEventListener("readystatechange",function(){if(4===i.readyState){var t=[200,304];t.indexOf(i.status)>-1?(e.widgetData=JSON.parse(i.responseText),null!==e.widgetData&&e.loadIFrame()):console.warn("Initial messages API call failed")}}),i.open("GET",t),i.setRequestHeader(v,window.location.href),this.isInternal()&&(0,m.addAuthToRequest)(i),i.send()}},{key:"handleResize",value:function(e){var t=e.height,i=e.width,n=document.getElementById(g);this.isMobile&&this.isOpen?(n.style.height="100%",n.style.width="100%"):t&&i&&(n.style.height=t+"px",n.style.width=i+"px")}},{key:"handleOpenChange",value:function(e){var t=document.documentElement,i=document.getElementById(g),n=i.getElementsByClassName(b.SHADOW)[0];if(this.isOpen=e,(0,h.setCookie)(c.default.IS_OPEN,this.isOpen,f.default.THIRTY_MINUTES),this.isOpen?(t.classList.add(b.ACTIVE),n.classList.add("active")):(t.classList.remove(b.ACTIVE),n.classList.remove("active")),this.isMobile&&this.isOpen){var s=window.innerHeight,a=window.innerWidth;this.handleResize({height:s,width:a})}}},{key:"isOriginAllowed",value:function(e){return this.getIFrameDomain()===e}},{key:"handleMessage",value:function(e){if(this.isOriginAllowed(e.origin)){var t=e.message?"message":"data",i=e[t];switch("string"==typeof i&&(i=JSON.parse(i)),i.type){case l.default.IFRAME_RESIZE:this.handleResize(i.data);break;case l.default.OPEN_CHANGE:this.handleOpenChange(i.data);break;case l.default.CLOSED_WELCOME_MESSAGE:(0,h.setCookie)(c.default.HIDE_WELCOME_MESSAGE,!0,f.default.THIRTY_MINUTES);break;case l.default.REQUEST_WIDGET:e.source.postMessage(JSON.stringify({type:l.default.WIDGET_DATA,data:this.widgetData}),"*")}}}},{key:"registerMessageHandler",value:function(){window.addEventListener("message",this.handleMessage)}},{key:"shouldRenderWidget",value:function(){return!this.isMobile||53!==this.portalId||this.isInternal()}},{key:"start",value:function(){this.shouldRenderWidget()&&(this.isMobile&&document.documentElement.classList.add(b.MOBILE),this.registerMessageHandler(),this.sendStartupRequest())}}]),e}();t.default=w,e.exports=t.default},function(e,t,i){var n,s,a;/**
 * isMobile.js v0.4.1
 *
 * A simple library to detect Apple phones and tablets,
 * Android phones and tablets, other mobile devices (like blackberry, mini-opera and windows phone),
 * and any kind of seven inch device, via user agent sniffing.
 *
 * @author: Kai Mallea (kmallea@gmail.com)
 *
 * @license: http://creativecommons.org/publicdomain/zero/1.0/
 */
!function(i){var o=/iPhone/i,r=/iPod/i,d=/iPad/i,u=/(?=.*\bAndroid\b)(?=.*\bMobile\b)/i,l=/Android/i,h=/(?=.*\bAndroid\b)(?=.*\bSD4930UR\b)/i,c=/(?=.*\bAndroid\b)(?=.*\b(?:KFOT|KFTT|KFJWI|KFJWA|KFSOWI|KFTHWI|KFTHWA|KFAPWI|KFAPWA|KFARWI|KFASWI|KFSAWI|KFSAWA)\b)/i,p=/Windows Phone/i,f=/(?=.*\bWindows\b)(?=.*\bARM\b)/i,m=/BlackBerry/i,g=/BB10/i,b=/Opera Mini/i,v=/(CriOS|Chrome)(?=.*\bMobile\b)/i,w=/(?=.*\bFirefox\b)(?=.*\bMobile\b)/i,y=new RegExp("(?:Nexus 7|BNTV250|Kindle Fire|Silk|GT-P1000)","i"),E=function(e,t){return e.test(t)},I=function(e){var t=e||navigator.userAgent,i=t.split("[FBAN");if("undefined"!=typeof i[1]&&(t=i[0]),i=t.split("Twitter"),"undefined"!=typeof i[1]&&(t=i[0]),this.apple={phone:E(o,t),ipod:E(r,t),tablet:!E(o,t)&&E(d,t),device:E(o,t)||E(r,t)||E(d,t)},this.amazon={phone:E(h,t),tablet:!E(h,t)&&E(c,t),device:E(h,t)||E(c,t)},this.android={phone:E(h,t)||E(u,t),tablet:!E(h,t)&&!E(u,t)&&(E(c,t)||E(l,t)),device:E(h,t)||E(c,t)||E(u,t)||E(l,t)},this.windows={phone:E(p,t),tablet:E(f,t),device:E(p,t)||E(f,t)},this.other={blackberry:E(m,t),blackberry10:E(g,t),opera:E(b,t),firefox:E(w,t),chrome:E(v,t),device:E(m,t)||E(g,t)||E(b,t)||E(w,t)||E(v,t)},this.seven_inch=E(y,t),this.any=this.apple.device||this.android.device||this.windows.device||this.other.device||this.seven_inch,this.phone=this.apple.phone||this.android.phone||this.windows.phone,this.tablet=this.apple.tablet||this.android.tablet||this.windows.tablet,"undefined"==typeof window)return this},S=function(){var e=new I;return e.Class=I,e};"undefined"!=typeof e&&e.exports&&"undefined"==typeof window?e.exports=I:"undefined"!=typeof e&&e.exports&&"undefined"!=typeof window?e.exports=S():(s=[],n=i.isMobile=S(),a="function"==typeof n?n.apply(t,s):n,!(void 0!==a&&(e.exports=a)))}(this)},function(e,t){"use strict";"use es6";function i(){var e=(new Date).getTime();return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,function(t){var i=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?i:3&i|8).toString(16)})}function n(){var e=window.crypto||window.msCrypto,t=new Uint16Array(8);e.getRandomValues(t);var i=function(e){for(var t=e.toString(16);t.length<4;)t="0"+t;return t};return i(t[0])+i(t[1])+i(t[2])+i(t[3])+i(t[4])+i(t[5])+i(t[6])+i(t[7])}function s(){var e=window.crypto||window.msCrypto;return"undefined"!=typeof e&&"undefined"!=typeof e.getRandomValues&&"undefined"==typeof window.Uint16Array?n():i()}Object.defineProperty(t,"__esModule",{value:!0}),t.getUuid=s},function(e,t,i){"use strict";"use es6";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.addAuthToRequest=t.addCsrfHeader=void 0;var s=i(0),a=n(s),o=t.addCsrfHeader=function(e){e.setRequestHeader("X-HubSpot-CSRF-hubspotapi",(0,s.getCookie)(a.default.HUBSPOT_API_CSRF))};t.addAuthToRequest=function(e){o(e),e.withCredentials=!0}},function(e,t,i){!function(e){const t=i(13),n=e.createElement("style");if(n.setAttribute("type","text/css"),n.styleSheet)n.styleSheet.cssText=t;else{const s=document.createTextNode(t);n.appendChild(s)}const a=e.body.childNodes[0];e.body.insertBefore(n,a)}(document)},,,,,function(e,t){e.exports='html.hs-messages-widget-open.hs-messages-mobile,html.hs-messages-widget-open.hs-messages-mobile body{height:100%!important;overflow:hidden!important;position:relative!important}html.hs-messages-widget-open.hs-messages-mobile body{margin:0!important}#hubspot-messages-iframe-container{display:initial!important;z-index:2147483647!important;position:fixed!important;bottom:0!important;right:0!important}#hubspot-messages-iframe-container .shadow{display:initial!important;z-index:-1;position:absolute;width:0;height:0;bottom:0;right:0;content:""}#hubspot-messages-iframe-container .shadow.active{width:400px;height:400px;background:radial-gradient(ellipse at bottom right,rgba(29,39,54,.16) 0,rgba(29,39,54,0) 72%)}#hubspot-messages-iframe-container iframe{display:initial!important;width:100%!important;height:100%!important;border:none!important;position:absolute!important;bottom:0!important;right:0!important}'},function(e,t,i){"use strict";"use es6";function n(e){return e&&e.__esModule?e:{default:e}}var s=i(4),a=n(s);i(8);var o=document.getElementById("hubspot-messages-loader"),r=new a.default({portalId:o.getAttribute("data-hsjs-portal"),messagesEnv:o.getAttribute("data-hsjs-env")});"undefined"!=typeof messagesConfig&&messagesConfig.iFrameDomain&&r.setIFrameDomainOverride(messagesConfig.iFrameDomain),r.start()}]);})(); /** end_closure **/